var AssetAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getAsset=function(t,e,i){function s(s){e.call(i,s,t)}if(RES.hasRes(t)){var n=RES.getRes(t);n?s(n):RES.getResAsync(t,s,this)}else RES.getResByUrl(t,s,this,RES.ResourceItem.TYPE_IMAGE)},t}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var BottleType;!function(t){t[t.None=0]="None",t[t.Bottle1=1]="Bottle1",t[t.Bottle2=2]="Bottle2",t[t.Bottle3=3]="Bottle3",t[t.Bottle4=4]="Bottle4",t[t.Bottle5=5]="Bottle5",t[t.Bottle6=6]="Bottle6"}(BottleType||(BottleType={}));var Bottle=function(t){function e(e){t.call(this),this.BottleType=e}__extends(e,t);var i=__define,s=e,n=s.prototype;return i(n,"BottleType",function(){return this._BottleType},function(t){this._BottleType=t;var e="bottle"+t+"_png";this.source=RES.getRes(e)}),i(n,"IsSelected",function(){return this._IsSelected},function(t){this._IsSelected=t,t?this.alpha=.5:this.alpha=1}),e}(eui.Image);egret.registerClass(Bottle,"Bottle");var Game=function(t){function e(){t.call(this),this.pickupBottle=null,this.setBottle=null,this.tips="",this.lasttime=0,this.birthtime=0,this.sum=0,this.isPause=!0,this.mobilenum=!0,this._score=0,this.skinName="resource/eui_skins/GameSkin.exml",egret.startTick(this.onUpdate,this),this.addChild(this.pickupBottle=new Bottle(0)),this.pickupBottle.visible=!1,this.pickupBottle.anchorOffsetX=12.5,this.pickupBottle.anchorOffsetY=45,this.pickupBottle.scaleX=this.pickupBottle.scaleY=2,this.btn_replay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclick_replay,this),this.btn_mainmenu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclick_mainmenu,this),this.wheelturn(),this.wheelturn0()}__extends(e,t);var i=__define,s=e,n=s.prototype;return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},n.onUpdate=function(t){if(0==this.lasttime)return void(this.lasttime=t);var e=(t-this.lasttime)/1e3;if(this.lasttime=t,this.isPause)return!1;if(this.birthtime+=e,this.birthtime>2){this.birthtime=0;var i=new Bottle(Math.floor(6*Math.random()+1));i.x=Math.random()*this.gp_conveyer.width,this.gp_conveyer.addChild(i)}for(var s=this.gp_conveyer.numChildren-1;s>=0;s--){var n=this.gp_conveyer.getChildAt(s);n.y+=100*e,n.y>this.gp_conveyer.height&&(this.playlose(),this.gp_conveyer.removeChild(n),this.failureTips.text="有瓶子漏掉了",this.GameOver())}return this.gp_c.anchorOffsetY-=100*e,this.gp_c.anchorOffsetY<=-56&&(this.gp_c.anchorOffsetY=0),!1},n.ontouch_begin=function(t){for(var e=new egret.Point(t.stageX-this.gp_conveyer.x,t.stageY-this.gp_conveyer.y),i=this.gp_conveyer.numChildren-1;i>=0;i--){var s=this.gp_conveyer.getChildAt(i),n=new egret.Rectangle(s.x,s.y,s.width,s.height);n.containsPoint(e)&&(s.IsSelected=!0,this.setBottle=s,this.pickupBottle.BottleType=this.setBottle.BottleType,this.pickupBottle.visible=!0,this.mobilenum=!1,this.pickupBottle.x=t.stageX,this.pickupBottle.y=t.stageY,console.log("点击"))}},n.ontouch_move=function(t){null==this.setBottle||this.mobilenum||(console.log("移动"),this.pickupBottle.x=t.stageX,this.pickupBottle.y=t.stageY)},n.ontouch_end=function(t){null!=this.setBottle&&(this.setBottle.IsSelected=!1),this.mobilenum=!0,console.log("松开x"+this.pickupBottle.x),console.log("松开y"+this.pickupBottle.y),this.pickupBottle.visible=!1;for(var e=new egret.Point(this.pickupBottle.x-this.gp_packages.x,this.pickupBottle.y-this.gp_packages.y),i=0;i<this.gp_packages.numChildren;i++){var s=this.gp_packages.getChildAt(i);if(!s.ispacking){var n=new egret.Rectangle(s.x,s.y,s.width,s.height);if(n.containsPoint(e)){if(s.Pos==this.pickupBottle.BottleType){s.addBottle(this.pickupBottle)&&(this.score+=5),this.playping(),this.score+=1,this.pickupBottle.BottleType=0,this.gp_conveyer.removeChild(this.setBottle);break}if(0==this.pickupBottle.BottleType)continue;this.playlose(),this.failureTips.text="瓶子放错位置了",this.GameOver()}}}},n.wheelturn=function(){for(var t=egret.Tween.get(this.wheel),e=0;4>e;e++)t.wait(100).set({source:RES.getRes("wheel"+e+"_png")});t.call(this.wheelturn,this)},n.wheelturn0=function(){for(var t=egret.Tween.get(this.wheel0),e=0;4>e;e++)t.wait(100).set({source:RES.getRes("wheel"+e+"_png")});t.call(this.wheelturn0,this)},n.playping=function(){var t=RES.getRes("ping_mp3");t.play(0,1)},n.playlose=function(){var t=RES.getRes("lose_mp3");t.play(0,1)},n.GameOver=function(){this.gp_over.visible=!0,this.isPause=!0,this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.ontouch_begin,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.ontouch_move,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.ontouch_end,this);for(var t=0;t<this.gp_over.numChildren;t++){var e=this.gp_over.getChildAt(t);e.alpha=0,egret.Tween.get(e).wait(200*t).to({alpha:1},500)}},i(n,"score",function(){return this._score},function(t){this._score=t,this.lb_score.text=this.lb_overscore.text=t.toString()}),n.onclick_replay=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.ontouch_begin,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.ontouch_move,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.ontouch_end,this),this.score=0,this.gp_over.visible=!1,this.gp_conveyer.removeChildren(),this.pickupBottle.BottleType=0;for(var t=0;t<this.gp_packages.numChildren;t++){var e=this.gp_packages.getChildAt(t);e.clean_Bottle()}this.isPause=!1;for(var t=0;t<this.gp_packages.numChildren;t++){var i=this.gp_packages.getChildAt(t);i.anchorOffsetY=-800,egret.Tween.get(i).wait(200*t).to({anchorOffsetY:0},500)}},n.onclick_mainmenu=function(){this.parent.addChild(StartUI.getInstance()),this.parent.removeChild(this)},e._instance=null,e}(eui.Component);egret.registerClass(Game,"Game");var LoadingUI=function(t){function e(){t.call(this),this.sW=640,this.sH=950,this.createView()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createView=function(){RES.getResByUrl("resource/assets/overrole.png",this.drawIp,this),this.loadLineBg=new egret.Shape,this.loadLineBg.graphics.lineStyle(1,15856371),this.loadLineBg.graphics.moveTo(.25*this.sW,this.sH/2+100),this.loadLineBg.graphics.lineTo(.75*this.sW,this.sH/2+100),this.loadLineBg.graphics.endFill(),this.addChild(this.loadLineBg),this.drawLine(.3*this.sW),this.drawText()},s.drawIp=function(t){var e=new egret.Bitmap(t);e.scaleX=.5,e.scaleY=.5,e.x=this.sW/2-56.5,e.y=this.sH/2-86,this.addChild(e)},s.drawLine=function(t){this.loadLine=new egret.Shape,this.loadLine.graphics.lineStyle(1,65280),this.loadLine.graphics.moveTo(.25*this.sW,this.sH/2+100),this.loadLine.graphics.lineTo(t,this.sH/2+100),this.loadLine.graphics.endFill(),this.addChild(this.loadLine)},s.drawText=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.text="请稍后 ...",this.textField.textColor=11184810,this.textField.y=this.sH/2+120,this.textField.width=this.sW,this.textField.size=20,this.textField.height=50,this.textField.textAlign="center"},s.setProgress=function(t,e){this.drawLine(Math.ceil(t/e*this.sW*.5)+.25*this.sW)},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(t){function e(){t.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createChildren=function(){t.prototype.createChildren.call(this);var e=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",e),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},s.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},s.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},s.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},s.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},s.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},s.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},s.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},s.startCreateScene=function(){var t=new StartUI;this.addChild(t),t.alpha=0,egret.Tween.get(t).to({alpha:1},500,egret.Ease.sineIn)},e}(eui.UILayer);egret.registerClass(Main,"Main");var Package=function(t){function e(){t.call(this),this.ispacking=!1,this._sum=0}__extends(e,t);var i=__define,s=e,n=s.prototype;return n.createChildren=function(){this.img_body.source=RES.getRes("bottle"+this.Pos+"_0_png")},i(n,"Pos",function(){return this._Pos},function(t){this._Pos=t}),n.addBottle=function(t){return this.sum+=1,this.sum>=6?(this.packing(),!0):!1},n.packing=function(){this.ispacking=!0;for(var t=egret.Tween.get(this.img_body),e=7;24>e;e++)t.wait(100).set({source:RES.getRes("bottle"+this.Pos+"_"+e+"_png")});t.call(this.packover,this)},n.packover=function(){this.sum=0,this.ispacking=!1},i(n,"sum",function(){return this._sum},function(t){this._sum=t;var e="bottle"+this.Pos+"_"+t+"_png";this.img_body.source=RES.getRes(e)}),n.clean_Bottle=function(){this.sum=0},e}(eui.Component);egret.registerClass(Package,"Package");var SoundExample=function(t){function e(){t.call(this),this.playtimes=0,this.once(egret.Event.ADDED_TO_STAGE,this.onAddtoStage,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.onAddtoStage=function(){this.startLoad()},s.startLoad=function(){var t=new egret.URLLoader;t.dataFormat=egret.URLLoaderDataFormat.SOUND,t.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this);var e="resource/assets/aa.mp3",i=new egret.URLRequest(e);t.load(i)},s.onLoadComplete=function(t){var e=t.target,i=e.data;this.sound=i;var s=new egret.Sprite;s.graphics.beginFill(1636351),s.graphics.drawRoundRect(0,0,80,40,5,5),s.graphics.endFill(),s.touchEnabled=!0,s.anchorOffsetX=s.width/2,s.x=this.stage.stageWidth/2,s.anchorOffsetY=s.height/2,s.y=this.stage.stageHeight/2,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.addChild(s)},s.onTouch=function(t){var e=this.sound,i=this.soundChannel;return i?(console.log(i.position),this.playtimes=i.position,i.stop(),void(this.soundChannel=null)):(i=e.play(this.playtimes,-1),console.log(this.playtimes),i.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),void(this.soundChannel=i))},s.onSoundComplete=function(t){console.log("onSoundComplete")},e}(egret.DisplayObjectContainer);egret.registerClass(SoundExample,"SoundExample");var SoundStartAndStop=function(t){function e(){t.call(this),this.playtimes=0,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.mainFunc,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.mainFunc=function(){this.loadSoundComplete()},s.loadSoundComplete=function(){var t=new egret.TextField;t.text="播放",t.textColor=11184810,t.x=this.stage.stageWidth/2,t.y=this.stage.stageHeight/2;var e=new egret.Sprite;e.graphics.beginFill(1636351),e.graphics.drawRoundRect(0,0,80,40,5,5),e.graphics.endFill(),e.touchEnabled=!0,e.anchorOffsetX=e.width/2,e.x=this.stage.stageWidth/2,e.anchorOffsetY=e.height/2,e.y=this.stage.stageHeight/2;var i=new egret.Sprite;i.graphics.beginFill(1634559),i.graphics.drawRoundRect(0,0,80,40,5,5),i.graphics.endFill(),i.touchEnabled=!0,i.x=10,i.y=10,this.addChild(e),this.addChild(i),this.addChild(t),e.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playmusic,this),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startOnClick,this),this.sound=RES.getRes("aa_mp3")},s.startOnClick=function(){var t=this.sound,e=this.soundChannel;return e?(console.log(e.position),this.playtimes=e.position,e.stop(),void(this.soundChannel=null)):(e=t.play(this.playtimes,-1),console.log(this.playtimes),void(this.soundChannel=e))},s.playmusic=function(){var t=RES.getRes("button_mp3");t.play(0,1)},e}(egret.DisplayObjectContainer);egret.registerClass(SoundStartAndStop,"SoundStartAndStop");var Soundtest1=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.mainFunc,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return s.mainFunc=function(){this.loadResource(),this.startOnClick()},s.loadResource=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.loadComplete,this),RES.loadConfig("resource/default.res.json","resource/")},s.loadComplete=function(t){this.sound=RES.getRes("resource/assets/bgm_mp3"),this.SoundStartControl(),this.CloseStartControl()},s.SoundStartControl=function(){var t=new egret.Sprite;t.graphics.beginFill(65280),t.graphics.drawCircle(200,200,20),t.graphics.endFill(),t.width=200,t.height=200;var e=new egret.TextField;e.text="播放",e.x=200,e.y=200,this.addChild(t),this.addChild(e),t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startOnClick,this)},s.startOnClick=function(){this.channel&&this.channel.stop(),this.channel=this.sound.play(0,1)},s.CloseStartControl=function(){var t=new egret.Sprite;t.graphics.beginFill(1048320),t.graphics.drawCircle(100,100,20),t.graphics.endFill(),t.width=200,t.height=200;var e=new egret.TextField;e.text="停止",e.x=100,e.y=100,this.addChild(t),this.addChild(e),t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CloseOnClick,this)},s.CloseOnClick=function(t){this.channel&&(this.channel.stop(),this.channel=null)},e}(egret.DisplayObjectContainer);egret.registerClass(Soundtest1,"Soundtest1");var StartUI=function(t){function e(){t.call(this),this.playtimes=0,this.skinName="resource/eui_skins/StartSkin.exml",this.playmusic(),this.btn_play.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclick_play,this),this.btn_sound.addEventListener(egret.TouchEvent.TOUCH_TAP,this.playmusic,this)}__extends(e,t);var i=(__define,e),s=i.prototype;return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},s.onclick_play=function(){this.playmusicbtn(),this.parent.addChild(Game.getInstance()),this.parent.removeChild(this),Game.getInstance().onclick_replay()},s.playmusicbtn=function(){var t=RES.getRes("button_mp3");t.play(0,1)},s.playmusic=function(){this.sound=RES.getRes("aa_mp3");var t=this.sound,e=this.soundChannel;return e?(this.btn_sound.source=RES.getRes("sound_off_png"),console.log(e.position),this.playtimes=e.position,e.stop(),void(this.soundChannel=null)):(this.btn_sound.source=RES.getRes("sound_on_png"),e=t.play(this.playtimes,-1),console.log(this.playtimes),void(this.soundChannel=e))},e._instance=null,e}(eui.Component);egret.registerClass(StartUI,"StartUI");var Test=function(t){function e(){t.call(this),this.sW=640,this.sH=1007,this.createView()}__extends(e,t);var i=(__define,e),s=i.prototype;return s.createView=function(){this.loadLineBg=new egret.Shape,this.loadLineBg.graphics.lineStyle(1,15856371),this.loadLineBg.graphics.moveTo(.25*this.sW,this.sH/2),this.loadLineBg.graphics.lineTo(.75*this.sW,this.sH/2),this.loadLineBg.graphics.endFill(),this.addChild(this.loadLineBg),this.drawLine(.3*this.sW),this.drawText()},s.drawLine=function(t){this.loadLine=new egret.Shape,this.loadLine.graphics.lineStyle(1,65280),this.loadLine.graphics.moveTo(.25*this.sW,this.sH/2),this.loadLine.graphics.lineTo(t,this.sH/2),this.loadLine.graphics.endFill(),this.addChild(this.loadLine)},s.drawText=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.text="请稍后 ...",this.textField.textColor=11184810,this.textField.y=this.sH/2-60,this.textField.width=this.sW,this.textField.size=20,this.textField.textAlign="center"},s.drawIp=function(){var t=new egret.Bitmap;t.texture=RES.getRes("icon_cover_png"),t.scaleX=.618,t.scaleY=.618,t.x=this.sW-.618*t.width>>1,t.y=(this.sH-.618*t.height)/2-.618*t.height,this.addChild(t)},s.setProgress=function(t,e){this.drawLine(Math.ceil(t/e*this.sW*.5)+.25*this.sW)},e}(egret.Sprite);egret.registerClass(Test,"Test");var ThemeAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getTheme=function(t,e,i,s){function n(t){e.call(s,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(s))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_TEXT)},t}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);